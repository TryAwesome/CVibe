server:
  port: 8080

spring:
  application:
    name: cvibe-biz-service

  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

  # JPA Configuration
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect

  # Flyway Migration
  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration

  # Jackson Configuration
  jackson:
    serialization:
      write-dates-as-timestamps: false
    deserialization:
      fail-on-unknown-properties: false
    default-property-inclusion: non_null

  # Servlet Configuration
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB

# JWT Configuration
jwt:
  secret: ${JWT_SECRET:cvibe-default-secret-key-please-change-in-production-environment-2024}
  access-token-expiration: 3600000      # 1 hour
  refresh-token-expiration: 604800000   # 7 days

# MinIO Configuration
minio:
  endpoint: ${MINIO_ENDPOINT:http://localhost:9000}
  access-key: ${MINIO_ACCESS_KEY:minioadmin}
  secret-key: ${MINIO_SECRET_KEY:minioadmin}
  bucket:
    resumes: cvibe-resumes
    images: cvibe-images
    templates: cvibe-templates

# Google OAuth2 Configuration
google:
  oauth2:
    client-id: ${GOOGLE_CLIENT_ID:your-google-client-id}
    client-secret: ${GOOGLE_CLIENT_SECRET:your-google-client-secret}

# AI Model Configuration (Environment Variable Defaults)
# Users can override these in Settings page
ai:
  llm:
    provider: ${AI_LLM_PROVIDER:openai}
    api-key: ${AI_LLM_API_KEY:}
    model: ${AI_LLM_MODEL:gpt-4o}
    base-url: ${AI_LLM_BASE_URL:}
  vision:
    provider: ${AI_VISION_PROVIDER:openai}
    api-key: ${AI_VISION_API_KEY:}
    model: ${AI_VISION_MODEL:gpt-4o}
    base-url: ${AI_VISION_BASE_URL:}

# gRPC Services Configuration
grpc:
  ai-engine:
    host: ${AI_ENGINE_HOST:localhost}
    port: ${AI_ENGINE_PORT:50051}
    enabled: ${AI_ENGINE_ENABLED:true}
  search-service:
    host: ${SEARCH_SERVICE_HOST:localhost}
    port: ${SEARCH_SERVICE_PORT:50052}
    enabled: ${SEARCH_SERVICE_ENABLED:false}

# CORS Configuration
cors:
  allowed-origins: ${CORS_ORIGINS:http://localhost:3000}
  allowed-methods: GET,POST,PUT,DELETE,OPTIONS
  allowed-headers: "*"
  allow-credentials: true

# Logging
logging:
  level:
    root: INFO
    com.cvibe: DEBUG
    org.springframework.security: INFO
    org.hibernate.SQL: DEBUG
